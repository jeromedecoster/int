<!DOCTYPE html>
<html>
<head>
	<title>canvas-video</title>
	<script type="text/javascript" src="canvasvideo.min.js"></script>
	<style type="text/css">
	p {
		margin: 20px;
	}
		img, canvas {
			width: 100%;
		}

	</style>
</head>
<body>
<p>Gif anim√© 12fps <b>2,4Mo</b></p>
<img>
<p>Gif converti en mp4 <b>1Mo</b></p>
<p>ffmpeg -i 12fps.gif -vcodec libx264 -pix_fmt yuv420p -profile:v baseline -preset slower -crf 18 -vf scale=trunc\(iw/2\)*2:trunc\(ih/2\)*2 12fps.mp4</p>
<p><a href="https://github.com/84Paris/canvasvideo.js" target="_blank">canvasvideo.js</a></p>

<script type="text/javascript">
var options = {
    xhr: true,
    fps: 12,
    loop: true,
    // bufferTime: 6,
    // audio: false,
    // preload: true,
    // autoplay: true
}
	var video = new CanvasVideo('./12fps.mp4', options);
	
	video.addEventListener('canplaythrough', onLoaded);
	video.load();

	function onLoaded(e)
	{
	    document.body.appendChild(video.element);
	    document.querySelector('img').src = '12fps.gif'
	    if (!video.needTouch) video.play();
	    else document.body.addEventListener('touchend', playVideo);
	}

	function playVideo()
	{
	    video.play();
	}


	var video2 = new CanvasVideo('./12fps.mp4', options);
	
	video2.addEventListener('canplaythrough', onLoaded2);
	video2.load();

	function onLoaded2(e)
	{
	    document.body.appendChild(video2.element);
	    if (!video2.needTouch) video2.play();
	    else document.body.addEventListener('touchend', playVideo2);
	}

	function playVideo()
	{
	    video2.play();
	}

	var video3 = new CanvasVideo('./12fps.mp4', options);
	
	video3.addEventListener('canplaythrough', onLoaded3);
	video3.load();

	function onLoaded3(e)
	{
	    document.body.appendChild(video3.element);
	    if (!video3.needTouch) video3.play();
	    else document.body.addEventListener('touchend', playVideo3);
	}

	function playVideo()
	{
	    video3.play();
	}

	var video4 = new CanvasVideo('./12fps.mp4', options);
	
	video4.addEventListener('canplaythrough', onLoaded4);
	video4.load();

	function onLoaded4(e)
	{
	    document.body.appendChild(video4.element);
	    if (!video4.needTouch) video4.play();
	    else document.body.addEventListener('touchend', playVideo4);
	}

	function playVideo()
	{
	    video4.play();
	}
</script>
</body>
</html>